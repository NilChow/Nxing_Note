# 长链接、短链接

### 长链接

##### 简介

长连接是指在一个连接上可以连续发送多个数据包，在保持连接期间，如果没有数据包发送，需要双方发送链路检测包



##### 过程

连接->传输数据->保持连接->传输数据…->关闭(直到某一方关闭连接，多是客户端)



##### 优点

稳定、安全



##### 缺点

损耗较多资源



##### 应用场景

多用于操作频繁，点对点的通讯，而且连接数不能太多。



##### 使用规则

*   长连接一般是没有条件能判断读写什么时候结束，所以必须要加长度报文头。读函数应该先读取报文头的长度，再依据长度读取报文
*   在没有数据的时候，定时发送数据包(心跳包)，以判断连接状态







### 短链接

##### 简介

短连接是指通讯双方有数据交互时，就建立一个连接，数据发送完成后，则断开此连接，即每次连接只完成一项业务的发送



##### 过程

连接->传输数据->关闭连接



##### 优点

*   不需要长期占用通道，对于业务频率不高的场合，能节省通道的使用
*   管理起来比较简单，不需要额外的控制手段



##### 缺点

需要在每次发送业务时，都先建立一次连接(三次握手)，发送完后又要关闭(四次挥手)，这个过程的开销很大



##### 应用场景

像WEB网站的http服务一般都用短连接(http1.0只支持短连接，1.1 keep alive带时间和操作次数限制的长连接)

因为长连接对于服务端来说会耗费一定的资源，而像WEB网站这么频繁的上亿客户端的连接用短连接会更省资源

如果用长连接，而且同时有成千上万的用户访问，若是用长连接的话，那结果可想而知。所以并发量大，但每个用户无需频繁操作的情况下应该选择短连接









# 三次握手、四次挥手



